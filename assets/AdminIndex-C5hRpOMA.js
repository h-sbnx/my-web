import{_ as Ie,n as Te,k as w,i as C,E as s,p as Ce,q as Ne,c as q,a as n,b as e,w as t,s as a,v as c,u as xe,l as Q,x as Ue,e as k,r as Y,o as $,d as i,y as S,z as v,A as V,B as L,C as d,D as G,t as u,j as J,G as ae,h as B,H as Z,I as N,J as ie,F as ne,g as ue,K as De,L as ze}from"./index-C6xAr2tu.js";const Ee={class:"admin-page"},qe={class:"admin-header"},Se={class:"header-right"},Le={class:"tab-container"},Be={class:"card-container"},Ae={key:0},Fe={key:0,class:"team-detail"},je={class:"detail-section"},Me={class:"detail-section",style:{"margin-top":"20px"}},Pe={class:"detail-section",style:{"margin-top":"20px"}},Oe={class:"card-container"},Qe={class:"card-container"},Ye={key:1},Ge={slot:"tip",class:"el-upload__tip"},Je={class:"card-container"},g="http://localhost:8080/api",We={__name:"AdminIndex",setup(He){const te=xe();Te(()=>{const r=localStorage.getItem("adminToken");if(!r){te.replace("/login");return}const l=w.interceptors.request.use(m=>(m.headers.Authorization||(m.headers.Authorization=`Bearer ${r}`),m));onUnmounted(()=>{w.interceptors.request.eject(l)})});const h=()=>{Q.confirm("确定要退出登录吗？","退出确认",{type:"warning"}).then(()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),delete w.defaults.headers.common.Authorization,te.push("/login"),s.success("已退出登录")})},y=k(!1),oe=k("teamManage"),A=C({workId:""}),F=k([]),f=k(null),ee=k(!1),pe=async()=>{if(!A.workId){s.warning("请输入作品ID查询");return}y.value=!0;try{const r=await w.get(`${g}/team/queryByWorkId`,{params:{workId:A.workId}});r.data.code===200?(F.value=[r.data.data],s.success("查询成功")):(s.error(`查询失败：${r.data.message}`),F.value=[])}catch(r){if(r.response?.status===401){s.error("登录已过期，请重新登录"),h();return}s.error(`查询失败：${r.response?.data?.message||"网络异常"}`),F.value=[]}finally{y.value=!1}},me=r=>{f.value=r,ee.value=!0},fe=()=>{if(F.value.length===0){s.warning("暂无可导出的报名信息");return}Q.confirm("确定要导出当前报名信息吗？","导出确认").then(()=>{s.success("报名信息导出成功，文件将自动下载")})},j=C({publicType:""}),W=k([]),p=C({id:null,teamName:"",workId:"",workName:"",awardLevel:"",publicTime:"",publicType:"",publicTip:""}),M=k(!1),x=k(!1),H=async()=>{y.value=!0;try{let r;j.publicType?r=await w.get(`${g}/public/queryByType`,{params:{publicType:j.publicType}}):r=await w.get(`${g}/public/queryAll`),r.data.code===200?W.value=r.data.data:(s.error(`查询公示失败：${r.data.message}`),W.value=[])}catch(r){if(r.response?.status===401){s.error("登录已过期，请重新登录"),h();return}s.error(`查询公示失败：${r.response?.data?.message||"网络异常"}`),W.value=[]}finally{y.value=!1}},re=(r=null)=>{r?(Object.assign(p,r),x.value=!0):(Object.assign(p,{id:null,teamName:"",workId:"",workName:"",awardLevel:"",publicTime:"",publicType:"",publicTip:""}),x.value=!1),M.value=!0},ce=async()=>{if(!p.teamName)return s.error("队伍名称不能为空");if(!p.workId)return s.error("作品ID不能为空");if(!p.workName)return s.error("作品名称不能为空");if(!p.publicTime)return s.error("公示时间不能为空");if(!p.publicType)return s.error("公示类型不能为空");y.value=!0;try{let r;x.value?r=await w.post(`${g}/public/update`,p):r=await w.post(`${g}/public/add`,p),r.data.code===200?(s.success(x.value?"公示修改成功":"公示新增成功"),M.value=!1,H()):s.error(`${x.value?"修改":"新增"}失败：${r.data.message}`)}catch(r){if(r.response?.status===401){s.error("登录已过期，请重新登录"),h();return}s.error(`${x.value?"修改":"新增"}失败：${r.response?.data?.message||"网络异常"}`)}finally{y.value=!1}},ve=async r=>{Q.confirm("确定要删除该公示吗？","删除确认",{type:"warning"}).then(async()=>{y.value=!0;try{const l=await w.post(`${g}/public/delete`,{id:r});l.data.code===200?(s.success("公示删除成功"),H()):s.error(`删除失败：${l.data.message}`)}catch(l){if(l.response?.status===401){s.error("登录已过期，请重新登录"),h();return}s.error(`删除失败：${l.response?.data?.message||"网络异常"}`)}finally{y.value=!1}})},P=C({year:""}),K=k([]),le=k([]),b=C({id:null,title:"",time:"",fileUrl:"",fileName:"",year:""}),O=k(!1),U=k(!1),D=C({headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},action:`${g}/file/upload`,onSuccess:r=>{r.code===200?(b.fileUrl=r.data,b.fileName=D.fileName,s.success("附件上传成功")):s.error(`附件上传失败：${r.message}`)},onError:r=>{r.response?.status===401?(s.error("登录已过期，请重新登录"),h()):s.error("附件上传失败")},onChange:r=>{D.fileName=r.name},fileName:""}),ye=async()=>{try{const r=await w.get(`${g}/notice/queryAllYears`);r.data.code===200&&(le.value=r.data.data)}catch(r){if(r.response?.status===401){s.error("登录已过期，请重新登录"),h();return}s.error("加载年份列表失败")}},R=async()=>{y.value=!0;try{let r;P.year?r=await w.get(`${g}/notice/queryByYear`,{params:{year:P.year}}):r=await w.get(`${g}/notice/queryAll`),r.data.code===200?K.value=r.data.data:(s.error(`查询通知失败：${r.data.message}`),K.value=[])}catch(r){if(r.response?.status===401){s.error("登录已过期，请重新登录"),h();return}s.error(`查询通知失败：${r.response?.data?.message||"网络异常"}`),K.value=[]}finally{y.value=!1}},se=(r=null)=>{r?(Object.assign(b,r),U.value=!0):(Object.assign(b,{id:null,title:"",time:"",fileUrl:"",fileName:"",year:""}),U.value=!1),O.value=!0},be=async()=>{if(!b.title)return s.error("通知标题不能为空");if(!b.time)return s.error("发布时间不能为空");if(!b.year)return s.error("所属年份不能为空");y.value=!0;try{let r;U.value?r=await w.post(`${g}/notice/update`,b):r=await w.post(`${g}/notice/add`,b),r.data.code===200?(s.success(U.value?"通知修改成功":"通知新增成功"),O.value=!1,R()):s.error(`${U.value?"修改":"新增"}失败：${r.data.message}`)}catch(r){if(r.response?.status===401){s.error("登录已过期，请重新登录"),h();return}s.error(`${U.value?"修改":"新增"}失败：${r.response?.data?.message||"网络异常"}`)}finally{y.value=!1}},we=async r=>{Q.confirm("确定要删除该通知吗？","删除确认",{type:"warning"}).then(async()=>{y.value=!0;try{const l=await w.post(`${g}/notice/delete`,{id:r});l.data.code===200?(s.success("通知删除成功"),R()):s.error(`删除失败：${l.data.message}`)}catch(l){if(l.response?.status===401){s.error("登录已过期，请重新登录"),h();return}s.error(`删除失败：${l.response?.data?.message||"网络异常"}`)}finally{y.value=!1}})},ge=(r,l)=>{const m=document.createElement("a");m.href=`${g}/file/download?fileUuid=${r}`,m.download=l,m.setAttribute("Authorization",`Bearer ${localStorage.getItem("adminToken")}`),document.body.appendChild(m),m.click(),document.body.removeChild(m),s.success(`开始下载：${l}`)},z=C({workId:"",fileName:""}),E=k([]),I=C({pageNum:1,pageSize:10,total:0}),ke=async()=>{if(!z.workId){s.warning("请输入作品ID查询");return}y.value=!0;try{const r=await w.get(`${g}/file/queryByWorkId`,{params:{workId:z.workId}});r.data.code===200?(E.value=r.data.data.map(l=>({...l,auditStatusText:l.status===1?"审核通过":l.status===2?"审核驳回":"待审核"})),I.total=E.value.length,s.success(`查询到 ${E.value.length} 个文件`)):(s.error(`查询失败：${r.data.message}`),E.value=[],I.total=0)}catch(r){if(r.response?.status===401){s.error("登录已过期，请重新登录"),h();return}s.error(`查询失败：${r.response?.data?.message||"网络异常"}`),E.value=[],I.total=0}finally{y.value=!1}},de=async(r,l)=>{const m=l?"审核通过":"审核驳回";Q.confirm(`确定要${m}该作品文件吗？`,"审核确认",{type:"warning"}).then(async()=>{y.value=!0;try{const _=await w.post(`${g}/file/audit`,{id:r.id,status:l?1:2});_.data.code===200?(r.status=l?1:2,r.auditStatusText=m,s.success(`作品文件${m}成功`)):s.error(`审核失败：${_.data.message}`)}catch(_){if(_.response?.status===401){s.error("登录已过期，请重新登录"),h();return}s.error(`审核失败：${_.response?.data?.message||"网络异常"}`)}finally{y.value=!1}})},he=r=>{const l=document.createElement("a");l.href=`${g}/file/download?fileUuid=${r}`,l.setAttribute("Authorization",`Bearer ${localStorage.getItem("adminToken")}`),document.body.appendChild(l),l.click(),document.body.removeChild(l),s.success("文件下载中，请稍候")};return Ce(()=>{ye(),R(),H();const r=JSON.parse(localStorage.getItem("adminUser")||"{}");r.username&&s.success(`欢迎回来，${r.username}`)}),(r,l)=>{const m=Y("el-card"),_=Y("el-descriptions-item"),_e=Y("el-descriptions"),X=Y("el-tab-pane"),$e=Y("el-tabs"),Ve=Ue("loading");return Ne(($(),q("div",Ee,[n("div",qe,[l[26]||(l[26]=n("div",{class:"header-left"},[n("h1",{class:"page-title"},"大赛管理后台")],-1)),n("div",Se,[e(a(c),{type:"text",onClick:h},{default:t(()=>[...l[25]||(l[25]=[n("i",{class:"el-icon-switch-button"},null,-1),i(" 退出登录 ",-1)])]),_:1})])]),n("div",Le,[e($e,{modelValue:oe.value,"onUpdate:modelValue":l[24]||(l[24]=o=>oe.value=o),type:"card",class:"admin-tabs"},{default:t(()=>[e(X,{label:"报名信息管理",name:"teamManage"},{default:t(()=>[n("div",Be,[e(m,{shadow:"hover",class:"query-card"},{default:t(()=>[e(a(S),{model:A,inline:"",class:"query-form"},{default:t(()=>[e(a(v),{label:"作品ID"},{default:t(()=>[e(a(V),{modelValue:A.workId,"onUpdate:modelValue":l[0]||(l[0]=o=>A.workId=o),placeholder:"请输入作品ID",clearable:""},null,8,["modelValue"])]),_:1}),e(a(v),null,{default:t(()=>[e(a(c),{type:"primary",onClick:pe},{default:t(()=>[...l[27]||(l[27]=[i("查询",-1)])]),_:1}),e(a(c),{onClick:fe},{default:t(()=>[...l[28]||(l[28]=[i("导出数据",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(m,{shadow:"hover",class:"table-card",style:{"margin-top":"20px"}},{default:t(()=>[e(a(L),{data:F.value,border:"",style:{width:"100%"},"empty-text":"暂无报名信息"},{default:t(()=>[e(a(d),{prop:"workId",label:"作品ID",width:"150"}),e(a(d),{prop:"teamName",label:"队伍名称",width:"200"}),e(a(d),{prop:"groupType",label:"参赛组别",width:"200"},{default:t(o=>[e(a(G),null,{default:t(()=>[i(u(o.row.groupType),1)]),_:2},1024)]),_:1}),e(a(d),{prop:"projectName",label:"项目名称","min-width":"200"}),e(a(d),{prop:"school",label:"报名学校",width:"200"}),e(a(d),{label:"队员人数",width:"100"},{default:t(o=>[i(u(o.row.members?.length||0)+"人 ",1)]),_:1}),e(a(d),{label:"指导教师","min-width":"200"},{default:t(o=>[i(u(o.row.teacher1?.name||"-")+" ",1),o.row.teacher2?.name?($(),q("span",Ae,"、"+u(o.row.teacher2.name),1)):J("",!0)]),_:1}),e(a(d),{label:"操作",width:"150"},{default:t(o=>[e(a(c),{type:"primary",size:"small",onClick:T=>me(o.row)},{default:t(()=>[...l[29]||(l[29]=[i(" 查看详情 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),e(a(ae),{modelValue:ee.value,"onUpdate:modelValue":l[1]||(l[1]=o=>ee.value=o),title:"报名详情",width:"80%","append-to-body":""},{default:t(()=>[f.value?($(),q("div",Fe,[n("div",je,[l[30]||(l[30]=n("h3",{class:"section-title"},"基础信息",-1)),e(_e,{column:2,border:""},{default:t(()=>[e(_,{label:"作品ID"},{default:t(()=>[i(u(f.value.workId),1)]),_:1}),e(_,{label:"队伍名称"},{default:t(()=>[i(u(f.value.teamName),1)]),_:1}),e(_,{label:"参赛组别"},{default:t(()=>[i(u(f.value.groupType),1)]),_:1}),e(_,{label:"项目名称"},{default:t(()=>[i(u(f.value.projectName),1)]),_:1}),e(_,{label:"报名学校"},{default:t(()=>[i(u(f.value.school),1)]),_:1}),e(_,{label:"参赛专业"},{default:t(()=>[i(u(f.value.major),1)]),_:1})]),_:1})]),n("div",Me,[l[31]||(l[31]=n("h3",{class:"section-title"},"队员信息",-1)),e(a(L),{data:f.value.members,border:"",style:{width:"100%"},"empty-text":"暂无队员信息"},{default:t(()=>[e(a(d),{label:"序号",width:"80",align:"center"},{default:t(o=>[i(u(o.$index+1),1)]),_:1}),e(a(d),{prop:"name",label:"姓名",width:"100"}),e(a(d),{prop:"gender",label:"性别",width:"80"}),e(a(d),{prop:"college",label:"学院","min-width":"150"}),e(a(d),{prop:"majorGrade",label:"专业/年级","min-width":"180"}),e(a(d),{prop:"phone",label:"手机号","min-width":"150"}),e(a(d),{prop:"email",label:"邮箱","min-width":"200"})]),_:1},8,["data"])]),n("div",Pe,[l[32]||(l[32]=n("h3",{class:"section-title"},"指导教师信息",-1)),e(a(L),{border:"",style:{width:"100%"}},{default:t(()=>[e(a(d),{label:"教师1","min-width":"200"},{default:t(()=>[n("div",null,"姓名："+u(f.value.teacher1?.name||"-"),1),n("div",null,"性别："+u(f.value.teacher1?.gender||"-"),1),n("div",null,"单位："+u(f.value.teacher1?.unit||"-"),1),n("div",null,"手机号："+u(f.value.teacher1?.phone||"-"),1),n("div",null,"邮箱："+u(f.value.teacher1?.email||"-"),1)]),_:1}),f.value.teacher2?.name?($(),B(a(d),{key:0,label:"教师2（可选）","min-width":"200"},{default:t(()=>[n("div",null,"姓名："+u(f.value.teacher2.name),1),n("div",null,"性别："+u(f.value.teacher2.gender),1),n("div",null,"单位："+u(f.value.teacher2.unit),1),n("div",null,"手机号："+u(f.value.teacher2.phone),1),n("div",null,"邮箱："+u(f.value.teacher2.email),1)]),_:1})):J("",!0)]),_:1})])])):J("",!0)]),_:1},8,["modelValue"])]),_:1}),e(X,{label:"公示发布",name:"noticeManage"},{default:t(()=>[n("div",Oe,[e(m,{shadow:"hover",class:"operate-card"},{default:t(()=>[e(a(S),{model:j,inline:"",class:"query-form",style:{"margin-bottom":"10px"}},{default:t(()=>[e(a(v),{label:"公示类型"},{default:t(()=>[e(a(Z),{modelValue:j.publicType,"onUpdate:modelValue":l[2]||(l[2]=o=>j.publicType=o),placeholder:"请选择公示类型",clearable:"",onChange:H},{default:t(()=>[e(a(N),{label:"获奖公示",value:"获奖公示"}),e(a(N),{label:"初审公示",value:"初审公示"}),e(a(N),{label:"终审公示",value:"终审公示"})]),_:1},8,["modelValue"])]),_:1}),e(a(v),null,{default:t(()=>[e(a(c),{type:"primary",onClick:l[3]||(l[3]=o=>re())},{default:t(()=>[...l[33]||(l[33]=[n("i",{class:"el-icon-plus"},null,-1),i(" 新增公示 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(m,{shadow:"hover",class:"table-card",style:{"margin-top":"20px"}},{default:t(()=>[e(a(L),{data:W.value,border:"",style:{width:"100%"},"empty-text":"暂无公示信息"},{default:t(()=>[e(a(d),{prop:"teamName",label:"队伍名称",width:"200"}),e(a(d),{prop:"workId",label:"作品ID",width:"150"}),e(a(d),{prop:"workName",label:"作品名称","min-width":"200"}),e(a(d),{prop:"awardLevel",label:"获奖等级",width:"150"},{default:t(o=>[e(a(G),null,{default:t(()=>[i(u(o.row.awardLevel||"-"),1)]),_:2},1024)]),_:1}),e(a(d),{prop:"publicTime",label:"公示时间",width:"180"}),e(a(d),{prop:"publicType",label:"公示类型",width:"150"},{default:t(o=>[e(a(G),{type:"success"},{default:t(()=>[i(u(o.row.publicType),1)]),_:2},1024)]),_:1}),e(a(d),{prop:"publicTip",label:"公示备注","min-width":"200"}),e(a(d),{label:"操作",width:"200"},{default:t(o=>[e(a(c),{type:"info",size:"small",onClick:T=>re(o.row)},{default:t(()=>[...l[34]||(l[34]=[i(" 编辑 ",-1)])]),_:1},8,["onClick"]),e(a(c),{type:"danger",size:"small",onClick:T=>ve(o.row.id)},{default:t(()=>[...l[35]||(l[35]=[i(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),e(a(ae),{modelValue:M.value,"onUpdate:modelValue":l[12]||(l[12]=o=>M.value=o),title:x.value?"编辑公示":"新增公示",width:"70%","append-to-body":""},{footer:t(()=>[e(a(c),{onClick:l[11]||(l[11]=o=>M.value=!1)},{default:t(()=>[...l[36]||(l[36]=[i("取消",-1)])]),_:1}),e(a(c),{type:"primary",onClick:ce},{default:t(()=>[...l[37]||(l[37]=[i("保存",-1)])]),_:1})]),default:t(()=>[e(a(S),{model:p,"label-width":"100px"},{default:t(()=>[e(a(v),{label:"队伍名称"},{default:t(()=>[e(a(V),{modelValue:p.teamName,"onUpdate:modelValue":l[4]||(l[4]=o=>p.teamName=o),placeholder:"请输入队伍名称"},null,8,["modelValue"])]),_:1}),e(a(v),{label:"作品ID"},{default:t(()=>[e(a(V),{modelValue:p.workId,"onUpdate:modelValue":l[5]||(l[5]=o=>p.workId=o),placeholder:"请输入作品ID"},null,8,["modelValue"])]),_:1}),e(a(v),{label:"作品名称"},{default:t(()=>[e(a(V),{modelValue:p.workName,"onUpdate:modelValue":l[6]||(l[6]=o=>p.workName=o),placeholder:"请输入作品名称"},null,8,["modelValue"])]),_:1}),e(a(v),{label:"获奖等级"},{default:t(()=>[e(a(V),{modelValue:p.awardLevel,"onUpdate:modelValue":l[7]||(l[7]=o=>p.awardLevel=o),placeholder:"请输入获奖等级（可选）"},null,8,["modelValue"])]),_:1}),e(a(v),{label:"公示时间"},{default:t(()=>[e(a(ie),{modelValue:p.publicTime,"onUpdate:modelValue":l[8]||(l[8]=o=>p.publicTime=o),type:"date",placeholder:"请选择公示时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(a(v),{label:"公示类型"},{default:t(()=>[e(a(Z),{modelValue:p.publicType,"onUpdate:modelValue":l[9]||(l[9]=o=>p.publicType=o),placeholder:"请选择公示类型"},{default:t(()=>[e(a(N),{label:"获奖公示",value:"获奖公示"}),e(a(N),{label:"初审公示",value:"初审公示"}),e(a(N),{label:"终审公示",value:"终审公示"})]),_:1},8,["modelValue"])]),_:1}),e(a(v),{label:"公示备注"},{default:t(()=>[e(a(V),{modelValue:p.publicTip,"onUpdate:modelValue":l[10]||(l[10]=o=>p.publicTip=o),type:"textarea",placeholder:"请输入公示备注（可选）"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1}),e(X,{label:"通知发布",name:"messageManage"},{default:t(()=>[n("div",Qe,[e(m,{shadow:"hover",class:"operate-card"},{default:t(()=>[e(a(S),{model:P,inline:"",class:"query-form",style:{"margin-bottom":"10px"}},{default:t(()=>[e(a(v),{label:"所属年份"},{default:t(()=>[e(a(Z),{modelValue:P.year,"onUpdate:modelValue":l[13]||(l[13]=o=>P.year=o),placeholder:"请选择年份",clearable:"",onChange:R},{default:t(()=>[($(!0),q(ne,null,ue(le.value,o=>($(),B(a(N),{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(a(v),null,{default:t(()=>[e(a(c),{type:"primary",onClick:l[14]||(l[14]=o=>se())},{default:t(()=>[...l[38]||(l[38]=[n("i",{class:"el-icon-plus"},null,-1),i(" 新增通知 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(m,{shadow:"hover",class:"table-card",style:{"margin-top":"20px"}},{default:t(()=>[e(a(L),{data:K.value,border:"",style:{width:"100%"},"empty-text":"暂无通知信息"},{default:t(()=>[e(a(d),{prop:"title",label:"通知标题","min-width":"200"}),e(a(d),{prop:"time",label:"发布时间",width:"180"}),e(a(d),{prop:"year",label:"所属年份",width:"100"},{default:t(o=>[e(a(G),null,{default:t(()=>[i(u(o.row.year),1)]),_:2},1024)]),_:1}),e(a(d),{label:"附件",width:"200"},{default:t(o=>[o.row.fileName?($(),B(a(c),{key:0,type:"text",onClick:T=>ge(o.row.fileUrl,o.row.fileName)},{default:t(()=>[i(u(o.row.fileName)+" ",1),l[39]||(l[39]=n("i",{class:"el-icon-download"},null,-1))]),_:2},1032,["onClick"])):($(),q("span",Ye,"-"))]),_:1}),e(a(d),{label:"操作",width:"200"},{default:t(o=>[e(a(c),{type:"info",size:"small",onClick:T=>se(o.row)},{default:t(()=>[...l[40]||(l[40]=[i(" 编辑 ",-1)])]),_:1},8,["onClick"]),e(a(c),{type:"danger",size:"small",onClick:T=>we(o.row.id)},{default:t(()=>[...l[41]||(l[41]=[i(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),e(a(ae),{modelValue:O.value,"onUpdate:modelValue":l[19]||(l[19]=o=>O.value=o),title:U.value?"编辑通知":"新增通知",width:"70%","append-to-body":""},{footer:t(()=>[e(a(c),{onClick:l[18]||(l[18]=o=>O.value=!1)},{default:t(()=>[...l[43]||(l[43]=[i("取消",-1)])]),_:1}),e(a(c),{type:"primary",onClick:be},{default:t(()=>[...l[44]||(l[44]=[i("保存",-1)])]),_:1})]),default:t(()=>[e(a(S),{model:b,"label-width":"100px"},{default:t(()=>[e(a(v),{label:"通知标题"},{default:t(()=>[e(a(V),{modelValue:b.title,"onUpdate:modelValue":l[15]||(l[15]=o=>b.title=o),placeholder:"请输入通知标题"},null,8,["modelValue"])]),_:1}),e(a(v),{label:"发布时间"},{default:t(()=>[e(a(ie),{modelValue:b.time,"onUpdate:modelValue":l[16]||(l[16]=o=>b.time=o),type:"date",placeholder:"请选择发布时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(a(v),{label:"所属年份"},{default:t(()=>[e(a(Z),{modelValue:b.year,"onUpdate:modelValue":l[17]||(l[17]=o=>b.year=o),placeholder:"请选择所属年份"},{default:t(()=>[($(!0),q(ne,null,ue(le.value,o=>($(),B(a(N),{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(a(v),{label:"通知附件"},{default:t(()=>[e(a(De),{action:D.action,headers:D.headers,"on-success":D.onSuccess,"on-error":D.onError,"on-change":D.onChange,data:{workId:"notice_"+Date.now()},limit:1},{default:t(()=>[e(a(c),{size:"small",type:"primary"},{default:t(()=>[...l[42]||(l[42]=[i("点击上传",-1)])]),_:1}),n("div",Ge," 仅支持单个文件上传，当前已上传："+u(b.fileName||"无"),1)]),_:1},8,["action","headers","on-success","on-error","on-change","data"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1}),e(X,{label:"作品上传审核",name:"fileAudit"},{default:t(()=>[n("div",Je,[e(m,{shadow:"hover",class:"query-card"},{default:t(()=>[e(a(S),{model:z,inline:"",class:"query-form"},{default:t(()=>[e(a(v),{label:"作品ID"},{default:t(()=>[e(a(V),{modelValue:z.workId,"onUpdate:modelValue":l[20]||(l[20]=o=>z.workId=o),placeholder:"请输入作品ID",clearable:""},null,8,["modelValue"])]),_:1}),e(a(v),{label:"文件名"},{default:t(()=>[e(a(V),{modelValue:z.fileName,"onUpdate:modelValue":l[21]||(l[21]=o=>z.fileName=o),placeholder:"请输入文件名关键词",clearable:""},null,8,["modelValue"])]),_:1}),e(a(v),null,{default:t(()=>[e(a(c),{type:"primary",onClick:ke},{default:t(()=>[...l[45]||(l[45]=[i("查询",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(m,{shadow:"hover",class:"table-card",style:{"margin-top":"20px"}},{default:t(()=>[e(a(L),{data:E.value,border:"",style:{width:"100%"},"empty-text":"暂无文件信息"},{default:t(()=>[e(a(d),{prop:"workId",label:"作品ID",width:"150"}),e(a(d),{prop:"originalFileName",label:"文件名","min-width":"200"}),e(a(d),{label:"文件大小",width:"120"},{default:t(o=>[i(u((o.row.fileSize/1024/1024).toFixed(2))+" MB ",1)]),_:1}),e(a(d),{prop:"fileType",label:"文件类型",width:"150"}),e(a(d),{prop:"uploadTime",label:"上传时间",width:"200"},{default:t(o=>[i(u(o.row.uploadTime),1)]),_:1}),e(a(d),{label:"审核状态",width:"120"},{default:t(o=>[e(a(G),{type:o.row.status===1?"success":o.row.status===2?"danger":"warning"},{default:t(()=>[i(u(o.row.auditStatusText),1)]),_:2},1032,["type"])]),_:1}),e(a(d),{label:"操作",width:"250"},{default:t(o=>[e(a(c),{type:"info",size:"small",onClick:T=>he(o.row.fileUuid)},{default:t(()=>[...l[46]||(l[46]=[i(" 下载 ",-1)])]),_:1},8,["onClick"]),o.row.status?J("",!0):($(),B(a(c),{key:0,type:"success",size:"small",onClick:T=>de(o.row,!0)},{default:t(()=>[...l[47]||(l[47]=[i(" 审核通过 ",-1)])]),_:1},8,["onClick"])),o.row.status?J("",!0):($(),B(a(c),{key:1,type:"danger",size:"small",onClick:T=>de(o.row,!1)},{default:t(()=>[...l[48]||(l[48]=[i(" 审核驳回 ",-1)])]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["data"]),e(a(ze),{onSizeChange:l[22]||(l[22]=o=>I.pageSize=o),onCurrentChange:l[23]||(l[23]=o=>I.pageNum=o),"current-page":I.pageNum,"page-sizes":[10,20,50],"page-size":I.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:I.total,style:{"margin-top":"20px","text-align":"right"}},null,8,["current-page","page-size","total"])]),_:1})])]),_:1})]),_:1},8,["modelValue"])])])),[[Ve,y.value]])}}},Re=Ie(We,[["__scopeId","data-v-472afe5b"]]);export{Re as default};
