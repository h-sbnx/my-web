import{_ as U,c as B,a as r,b as o,w as t,r as a,o as C,d as s,e as _,i as E,E as d}from"./index-CCke45c2.js";const M={class:"upload-page"},R={class:"upload-container"},h="http://localhost:8080/api/comp/file/upload",D={__name:"UploadView",setup(z){const n=E({workId:""}),b={workId:[{required:!0,message:"请输入作品ID",trigger:"blur"}],file:[{required:!0,validator:(l,e,p)=>{u.value.length===0?p(new Error("请选择要上传的文件")):p()},trigger:"change"}]},i=_(null),c=_(null),u=_([]),w=l=>l.size/1024/1024<200?!0:(d.error("文件大小不能超过200MB！"),!1),g=()=>{i.value.validate(l=>{if(l){if(u.value.length===0){d.warning("请先选择文件！");return}c.value.submit()}else d.error("请完善表单信息！")})},k=l=>{d.success(`作品上传成功！文件存储路径：${l.data.filePath}`),v()},I=l=>{d.error(`上传失败：${l.message||"网络异常"}`)},v=()=>{i.value.resetFields(),u.value=[],c.value.clearFiles()};return(l,e)=>{const p=a("el-input"),f=a("el-form-item"),m=a("el-button"),x=a("el-upload"),V=a("el-form"),y=a("el-card");return C(),B("div",M,[r("div",R,[e[5]||(e[5]=r("h2",{class:"page-title"},"作品提交",-1)),o(y,{class:"upload-card"},{default:t(()=>[o(V,{model:n,rules:b,ref_key:"uploadFormRef",ref:i,"label-width":"100px",class:"upload-form"},{default:t(()=>[o(f,{label:"作品ID：",prop:"workId"},{default:t(()=>[o(p,{modelValue:n.workId,"onUpdate:modelValue":e[0]||(e[0]=F=>n.workId=F),placeholder:"请输入报名成功后获取的作品ID"},null,8,["modelValue"])]),_:1}),o(f,{label:"作品文件：",prop:"file"},{default:t(()=>[o(x,{class:"upload-demo",ref_key:"uploadRef",ref:c,action:h,headers:{"Content-Type":"multipart/form-data"},data:{workId:n.workId},"file-list":u.value,"before-upload":w,"on-success":k,"on-error":I,limit:1,"auto-upload":!1,accept:".zip,.rar,.doc,.docx,.pdf"},{default:t(()=>[o(m,{type:"primary"},{default:t(()=>[...e[1]||(e[1]=[s("选择文件",-1)])]),_:1}),e[2]||(e[2]=r("div",{slot:"tip",class:"el-upload__tip"},[s(" 支持格式：zip/rar、doc/docx、pdf"),r("br"),s(" 单个文件不超过200MB，文件命名格式：作品ID_队伍名称"),r("br")],-1))]),_:1},8,["data","file-list"])]),_:1}),o(f,null,{default:t(()=>[o(m,{type:"primary",onClick:g},{default:t(()=>[...e[3]||(e[3]=[s("提交作品",-1)])]),_:1}),o(m,{onClick:v},{default:t(()=>[...e[4]||(e[4]=[s("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])])}}},N=U(D,[["__scopeId","data-v-9b0cfba4"]]);export{N as default};
