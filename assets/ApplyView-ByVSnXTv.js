import{_ as C,c as q,b as _,a as e,w as o,r as m,o as k,e as V,t as G,f as L,g as $,E as g,h as A}from"./index-s0KHejYM.js";const B={class:"apply-page"},F={class:"apply-container"},D="http://localhost:8080/api/comp/file/uploadPhoto",E={__name:"ApplyView",setup(I){const t=$({groupType:"",teamName:"",projectName:"",school:"",major:"",members:[{name:"",gender:"",college:"",majorGrade:"",studentType:"",phone:"",email:"",photoList:[]}],teacher1:{name:"",gender:"",position:"",title:"",unit:"",email:"",phone:""},teacher2:{name:"",gender:"",position:"",title:"",unit:"",email:"",phone:""}}),y={groupType:[{required:!0,message:"请选择参赛组别",trigger:"change"}],teamName:[{required:!0,message:"请输入队伍名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],school:[{required:!0,message:"请输入报名学校",trigger:"blur"}],major:[{required:!0,message:"请输入参赛专业",trigger:"blur"}],members:[{required:!0,validator:(i,a,u)=>{a.every(d=>d.name&&d.gender&&d.college&&d.majorGrade&&d.studentType&&d.phone&&d.photoList.length>0)?u():u(new Error("请完善所有队员信息（含学生证照片）"))},trigger:"change"}],"teacher1.name":[{required:!0,message:"请输入指导教师1姓名",trigger:"blur"}],"teacher1.gender":[{required:!0,message:"请选择指导教师1性别",trigger:"change"}],"teacher1.unit":[{required:!0,message:"请输入指导教师1单位",trigger:"blur"}],"teacher1.phone":[{required:!0,message:"请输入指导教师1电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]},f=L(null),U=()=>{if(t.members.length>=5){g.warning("每队最多5名队员");return}t.members.push({name:"",gender:"",college:"",majorGrade:"",studentType:"",phone:"",email:"",photoList:[]})},v=i=>{t.members.splice(i,1)},j=(i,a)=>{t.members[a].photoList=i.fileList},N=()=>{f.value.validate(async i=>{if(i)try{const a=await A.post("/team/add",t);a.data.code===200?(g.success(`报名成功！您的作品ID为：${a.data.data.workId}`),w()):g.error(a.data.msg||"报名失败，请重试")}catch{g.error("网络异常，报名失败")}else g.error("请完善表单必填信息")})},w=()=>{f.value.resetFields(),t.members=[{name:"",gender:"",college:"",majorGrade:"",studentType:"",phone:"",email:"",photoList:[]}],t.teacher2={name:"",gender:"",position:"",title:"",unit:"",email:"",phone:""}};return(i,a)=>{const u=m("el-option"),s=m("el-select"),d=m("el-form-item"),r=m("el-input"),n=m("el-table-column"),h=m("el-button"),T=m("el-upload"),x=m("el-table"),b=m("el-form"),c=m("el-card");return k(),q("div",B,[_("div",F,[a[25]||(a[25]=_("h2",{class:"page-title"},"大赛报名表",-1)),e(c,{class:"apply-card"},{default:o(()=>[e(b,{model:t,rules:y,ref_key:"applyFormRef",ref:f,"label-width":"120px",class:"apply-form"},{default:o(()=>[e(d,{label:"参赛组别",prop:"groupType"},{default:o(()=>[e(s,{modelValue:t.groupType,"onUpdate:modelValue":a[0]||(a[0]=l=>t.groupType=l),placeholder:"请选择参赛组别"},{default:o(()=>[e(u,{label:"A、医学诊疗技术与器械组",value:"A"}),e(u,{label:"B、生物医学信息工程组",value:"B"}),e(u,{label:"C、生物材料与组织工程组",value:"C"}),e(u,{label:"D、其他",value:"D"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"队伍名称",prop:"teamName"},{default:o(()=>[e(r,{modelValue:t.teamName,"onUpdate:modelValue":a[1]||(a[1]=l=>t.teamName=l),placeholder:"请输入队伍名称（不超过20字）"},null,8,["modelValue"])]),_:1}),e(d,{label:"项目名称",prop:"projectName"},{default:o(()=>[e(r,{modelValue:t.projectName,"onUpdate:modelValue":a[2]||(a[2]=l=>t.projectName=l),placeholder:"请输入参赛项目名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"报名学校",prop:"school"},{default:o(()=>[e(r,{modelValue:t.school,"onUpdate:modelValue":a[3]||(a[3]=l=>t.school=l),placeholder:"如：安徽医科大学"},null,8,["modelValue"])]),_:1}),e(d,{label:"参赛专业",prop:"major"},{default:o(()=>[e(r,{modelValue:t.major,"onUpdate:modelValue":a[4]||(a[4]=l=>t.major=l),placeholder:"如：生物医学工程、医学信息工程"},null,8,["modelValue"])]),_:1}),e(d,{label:"队员信息",prop:"members"},{default:o(()=>[e(x,{data:t.members,border:"",style:{width:"100%"},class:"member-table"},{default:o(()=>[e(n,{label:"序号",width:"80",align:"center"},{default:o(l=>[V(G(l.$index+1),1)]),_:1}),e(n,{label:"姓名",prop:"name",width:"120"},{default:o(l=>[e(r,{modelValue:l.row.name,"onUpdate:modelValue":p=>l.row.name=p,placeholder:"请输入姓名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"性别",prop:"gender",width:"100"},{default:o(l=>[e(s,{modelValue:l.row.gender,"onUpdate:modelValue":p=>l.row.gender=p,placeholder:"请选择"},{default:o(()=>[e(u,{label:"男",value:"男"}),e(u,{label:"女",value:"女"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"学院",prop:"college",width:"150"},{default:o(l=>[e(r,{modelValue:l.row.college,"onUpdate:modelValue":p=>l.row.college=p,placeholder:"请输入学院"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"专业/年级",prop:"majorGrade",width:"180"},{default:o(l=>[e(r,{modelValue:l.row.majorGrade,"onUpdate:modelValue":p=>l.row.majorGrade=p,placeholder:"如：医学信息工程/2023级"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"学生类型",prop:"studentType",width:"120"},{default:o(l=>[e(s,{modelValue:l.row.studentType,"onUpdate:modelValue":p=>l.row.studentType=p,placeholder:"请选择"},{default:o(()=>[e(u,{label:"本科",value:"本科"}),e(u,{label:"硕",value:"硕"}),e(u,{label:"博",value:"博"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"手机号码",prop:"phone",width:"150"},{default:o(l=>[e(r,{modelValue:l.row.phone,"onUpdate:modelValue":p=>l.row.phone=p,placeholder:"请输入手机号"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"电子邮箱",prop:"email",width:"200"},{default:o(l=>[e(r,{modelValue:l.row.email,"onUpdate:modelValue":p=>l.row.email=p,placeholder:"请输入电子邮箱"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"学生证照片",prop:"studentIdPhoto",width:"200"},{default:o(l=>[e(T,{class:"upload-photo",action:D,"file-list":l.row.photoList,limit:1,"auto-upload":!1,accept:"image/*",onChange:p=>j(p,l.$index)},{default:o(()=>[e(h,{size:"small",type:"primary"},{default:o(()=>[...a[19]||(a[19]=[V("上传照片",-1)])]),_:1})]),_:1},8,["file-list","onChange"])]),_:1}),e(n,{label:"操作",width:"100",align:"center"},{default:o(l=>[e(h,{type:"danger",size:"small",onClick:p=>v(l.$index),disabled:t.members.length<=1},{default:o(()=>[...a[20]||(a[20]=[V(" 删除 ",-1)])]),_:1},8,["onClick","disabled"])]),_:1})]),_:1},8,["data"]),e(h,{type:"primary",size:"small",onClick:U,style:{"margin-top":"10px"}},{default:o(()=>[...a[21]||(a[21]=[V(" 添加队员 ",-1)])]),_:1}),a[22]||(a[22]=_("div",{class:"form-tip"}," 注：每队最少1人，最多5人；每人需上传学生证照片（清晰可辨）；报名截止时间：2026年3月15日 ",-1))]),_:1}),e(d,{label:"指导教师1",prop:"teacher1.name"},{default:o(()=>[e(c,{shadow:"hover",class:"teacher-card"},{default:o(()=>[e(b,{model:t.teacher1,"label-width":"100px"},{default:o(()=>[e(d,{label:"姓名",prop:"name"},{default:o(()=>[e(r,{modelValue:t.teacher1.name,"onUpdate:modelValue":a[5]||(a[5]=l=>t.teacher1.name=l),placeholder:"请输入指导教师姓名"},null,8,["modelValue"])]),_:1}),e(d,{label:"性别",prop:"gender"},{default:o(()=>[e(s,{modelValue:t.teacher1.gender,"onUpdate:modelValue":a[6]||(a[6]=l=>t.teacher1.gender=l),placeholder:"请选择"},{default:o(()=>[e(u,{label:"男",value:"男"}),e(u,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"职务",prop:"position"},{default:o(()=>[e(r,{modelValue:t.teacher1.position,"onUpdate:modelValue":a[7]||(a[7]=l=>t.teacher1.position=l),placeholder:"如：教授、讲师"},null,8,["modelValue"])]),_:1}),e(d,{label:"职称",prop:"title"},{default:o(()=>[e(r,{modelValue:t.teacher1.title,"onUpdate:modelValue":a[8]||(a[8]=l=>t.teacher1.title=l),placeholder:"如：博士生导师"},null,8,["modelValue"])]),_:1}),e(d,{label:"单位",prop:"unit"},{default:o(()=>[e(r,{modelValue:t.teacher1.unit,"onUpdate:modelValue":a[9]||(a[9]=l=>t.teacher1.unit=l),placeholder:"如：安徽医科大学生物医学工程学院"},null,8,["modelValue"])]),_:1}),e(d,{label:"电子邮箱",prop:"email"},{default:o(()=>[e(r,{modelValue:t.teacher1.email,"onUpdate:modelValue":a[10]||(a[10]=l=>t.teacher1.email=l),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1}),e(d,{label:"手机号码",prop:"phone"},{default:o(()=>[e(r,{modelValue:t.teacher1.phone,"onUpdate:modelValue":a[11]||(a[11]=l=>t.teacher1.phone=l),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(d,{label:"指导教师2（可选）",prop:"teacher2.name"},{default:o(()=>[e(c,{shadow:"hover",class:"teacher-card"},{default:o(()=>[e(b,{model:t.teacher2,"label-width":"100px"},{default:o(()=>[e(d,{label:"姓名",prop:"name"},{default:o(()=>[e(r,{modelValue:t.teacher2.name,"onUpdate:modelValue":a[12]||(a[12]=l=>t.teacher2.name=l),placeholder:"请输入指导教师姓名（可选）"},null,8,["modelValue"])]),_:1}),e(d,{label:"性别",prop:"gender"},{default:o(()=>[e(s,{modelValue:t.teacher2.gender,"onUpdate:modelValue":a[13]||(a[13]=l=>t.teacher2.gender=l),placeholder:"请选择"},{default:o(()=>[e(u,{label:"男",value:"男"}),e(u,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"职务",prop:"position"},{default:o(()=>[e(r,{modelValue:t.teacher2.position,"onUpdate:modelValue":a[14]||(a[14]=l=>t.teacher2.position=l),placeholder:"如：教授、讲师"},null,8,["modelValue"])]),_:1}),e(d,{label:"职称",prop:"title"},{default:o(()=>[e(r,{modelValue:t.teacher2.title,"onUpdate:modelValue":a[15]||(a[15]=l=>t.teacher2.title=l),placeholder:"如：博士生导师"},null,8,["modelValue"])]),_:1}),e(d,{label:"单位",prop:"unit"},{default:o(()=>[e(r,{modelValue:t.teacher2.unit,"onUpdate:modelValue":a[16]||(a[16]=l=>t.teacher2.unit=l),placeholder:"如：安徽医科大学生物医学工程学院"},null,8,["modelValue"])]),_:1}),e(d,{label:"电子邮箱",prop:"email"},{default:o(()=>[e(r,{modelValue:t.teacher2.email,"onUpdate:modelValue":a[17]||(a[17]=l=>t.teacher2.email=l),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1}),e(d,{label:"手机号码",prop:"phone"},{default:o(()=>[e(r,{modelValue:t.teacher2.phone,"onUpdate:modelValue":a[18]||(a[18]=l=>t.teacher2.phone=l),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(d,null,{default:o(()=>[e(h,{type:"primary",onClick:N},{default:o(()=>[...a[23]||(a[23]=[V("提交报名",-1)])]),_:1}),e(h,{onClick:w},{default:o(()=>[...a[24]||(a[24]=[V("重置表单",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])])}}},M=C(E,[["__scopeId","data-v-1104e1c7"]]);export{M as default};
